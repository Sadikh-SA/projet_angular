{"ast":null,"code":"import _asyncToGenerator from \"/home/ababacar/Bureau/Master1/projet_angular/Front-End/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { LivresService } from '../livres.service';\nlet HomeComponent = class HomeComponent {\n  constructor(livresService, route, partageService) {\n    this.route = route;\n    this.partageService = partageService;\n    this.nItemP = 8;\n    this.page = 1;\n    this.livresService = new LivresService();\n    this.livres = [];\n    this.npages = 0;\n    this.Alllivres = [];\n    this.AlllivresFiltre = [];\n    this.listeAuteurs = [];\n    this.listeAnnees = [];\n    this.listeCategories = [];\n    this.getAllLivres();\n  }\n\n  addToPanier(livre) {\n    this.panier.push(livre);\n    this.partageService.addTopanier(this.panier);\n    console.log(this.partageService.panier);\n  }\n\n  ngOnInit() {\n    this.partageService.panier.subscribe(panier => this.panier = panier);\n  }\n\n  rechercher(data) {\n    this.livres = this.Alllivres;\n    this.livres = this.livres.filter(livre => livre.nom.toLocaleLowerCase().includes(data.motclee.toLocaleLowerCase()));\n\n    if (data.categorie !== \"\") {\n      this.livres = this.livres.filter(livre => livre.categorie.toLocaleLowerCase().includes(data.categorie.toLocaleLowerCase()));\n    }\n\n    if (data.auteur !== \"\") {\n      this.livres = this.livres.filter(livre => livre.auteur.toLocaleLowerCase() === data.auteur.toLocaleLowerCase());\n    }\n\n    if (data.annee !== \"\") {\n      this.livres = this.livres.filter(livre => livre.annee == data.annee);\n    }\n\n    if (data.minPrix !== \"\") {\n      this.livres = this.livres.filter(livre => livre.prix >= data.minPrix);\n    }\n\n    if (data.maxPrix !== \"\") {\n      this.livres = this.livres.filter(livre => livre.prix <= data.maxPrix);\n    }\n\n    this.page = 1;\n    this.npages = this.livres.length / this.nItemP;\n\n    if (Math.trunc(this.npages) < this.npages) {\n      this.npages = Math.trunc(this.npages) + 1;\n    }\n\n    this.AlllivresFiltre = this.livres;\n    this.livres = this.AlllivresFiltre.slice((this.page - 1) * this.nItemP, this.page * this.nItemP);\n    console.log(\"srx\", this.livres);\n  }\n\n  getAllLivres() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.Alllivres = yield _this.livresService.getLivres();\n      _this.AlllivresFiltre = _this.Alllivres;\n      _this.livres = _this.Alllivres.slice((_this.page - 1) * _this.nItemP, _this.page * _this.nItemP);\n      _this.npages = _this.Alllivres.length / _this.nItemP;\n\n      if (Math.trunc(_this.npages) < _this.npages) {\n        _this.npages = Math.trunc(_this.npages) + 1;\n      }\n\n      _this.listeAnnees = _this.Alllivres.map(item => item.annee).filter((value, index, self) => self.indexOf(value) === index).sort();\n      _this.listeAuteurs = _this.Alllivres.map(item => item.auteur).filter((value, index, self) => self.indexOf(value) === index);\n      _this.listeCategories = _this.Alllivres.map(item => item.categorie).filter((value, index, self) => self.indexOf(value) === index);\n      console.log('lol', _this.listeAnnees);\n    })();\n  }\n\n  goToPage(n) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.page = n;\n      _this2.livres = _this2.AlllivresFiltre.slice((_this2.page - 1) * _this2.nItemP, _this2.page * _this2.nItemP);\n    })();\n  }\n\n  goToNextPage() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.page = _this3.page + 1;\n      _this3.livres = _this3.AlllivresFiltre.slice((_this3.page - 1) * _this3.nItemP, _this3.page * _this3.nItemP);\n    })();\n  }\n\n  goToPrevPage() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.page = _this4.page - 1;\n      _this4.livres = _this4.AlllivresFiltre.slice((_this4.page - 1) * _this4.nItemP, _this4.page * _this4.nItemP);\n    })();\n  }\n\n  counter(i) {\n    console.log(\"Voici le i\", i);\n    return new Array(i);\n  }\n\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"sources":["/home/ababacar/Bureau/Master1/projet_angular/Front-End/src/app/home/home.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { LivresService } from '../livres.service';\nimport {Router} from '@angular/router';\nimport { PartageService } from '../partage.service';\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  public livres: any[];\n  public Alllivres: any[];\n  public AlllivresFiltre: any[];\n  public npages: number;\n  public nItemP = 8;\n  public page = 1;\n  public listeAuteurs : any[];\n  public listeAnnees : any[];\n  public listeCategories : any[];\n  public panier : any[];\n  livresService = new LivresService;\n  constructor(livresService : LivresService, private route:Router, private partageService:PartageService) {\n    this.livres = [];\n    this.npages = 0;\n    this.Alllivres = [];\n    this.AlllivresFiltre = [];\n    this.listeAuteurs = [];\n    this.listeAnnees = [];\n    this.listeCategories = [];\n\n    \n    this.getAllLivres() ;\n\n  }\n\n  addToPanier(livre:any) {\n    this.panier.push(livre);\n    this.partageService.addTopanier(this.panier);\n    console.log(this.partageService.panier);\n\n  }\n\n  ngOnInit(): void {\n    this.partageService.panier.subscribe((panier: any) => this.panier = panier)\n  }\n\n  rechercher(data: any) {\n    this.livres = this.Alllivres;\n    this.livres = this.livres.filter((livre) => livre.nom.toLocaleLowerCase().includes(data.motclee.toLocaleLowerCase()));\n    if(data.categorie !==\"\") {\n      this.livres = this.livres.filter((livre) => livre.categorie.toLocaleLowerCase().includes(data.categorie.toLocaleLowerCase()));\n    }\n    if(data.auteur !==\"\") {\n      this.livres = this.livres.filter((livre) => livre.auteur.toLocaleLowerCase() === data.auteur.toLocaleLowerCase());\n    }\n    if(data.annee !==\"\") {\n      this.livres = this.livres.filter((livre) =>  livre.annee == data.annee);\n    }\n    if(data.minPrix !==\"\") {\n      this.livres = this.livres.filter((livre) =>  livre.prix >= data.minPrix );\n    }\n    if(data.maxPrix !==\"\") {\n      this.livres = this.livres.filter((livre) =>  livre.prix <= data.maxPrix );\n    }\n    this.page = 1;\n    this.npages = (this.livres.length/this.nItemP);\n    if(Math.trunc(this.npages) < this.npages) {this.npages = Math.trunc(this.npages) + 1;}\n    this.AlllivresFiltre = this.livres;\n    this.livres = this.AlllivresFiltre.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\n    console.log(\"srx\", this.livres);\n    \n  }\n\n\n  async getAllLivres() {\n    this.Alllivres = await this.livresService.getLivres();\n    this.AlllivresFiltre = this.Alllivres;\n    this.livres = this.Alllivres.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\n    this.npages = (this.Alllivres.length/this.nItemP);\n    if(Math.trunc(this.npages) < this.npages) {this.npages = Math.trunc(this.npages) + 1;}\n    this.listeAnnees =  (this.Alllivres.map(item => item.annee).filter((value, index, self) => self.indexOf(value) === index)).sort()\n    this.listeAuteurs =  this.Alllivres.map(item => item.auteur).filter((value, index, self) => self.indexOf(value) === index)\n    this.listeCategories =  this.Alllivres.map(item => item.categorie).filter((value, index, self) => self.indexOf(value) === index)\n    console.log('lol',this.listeAnnees);\n  }\n\n  async goToPage(n: number) {\n    this.page = n;\n    this.livres = this.AlllivresFiltre.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\n  }\n\n  async goToNextPage() {\n    this.page = this.page+1;\n    this.livres = this.AlllivresFiltre.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\n  }\n\n  async goToPrevPage() {\n    this.page = this.page - 1;\n    this.livres = this.AlllivresFiltre.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\n  }\n\n  counter(i: number) {\n    console.log(\"Voici le i\", i)\n    return new Array(i);\n}\n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}