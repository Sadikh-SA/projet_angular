{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Saliou95/Desktop/Master1_Informatique/S1/projet_angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component, Input, EventEmitter, Output } from '@angular/core';\nimport Swal from 'sweetalert2';\nlet LoginComponent = class LoginComponent {\n  constructor(authenticationService, route, aroute) {\n    this.route = route;\n    this.aroute = aroute;\n    this.email = \"\";\n    this.submitted = new EventEmitter();\n    this.nom_complet = \"\";\n    this.authenticationService = authenticationService;\n  }\n\n  ngOnInit() {}\n\n  register(data) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(data);\n      var response = \"\";\n\n      if (data.password1 !== data.password2) {\n        Swal.fire('Erreur', 'Les deux mots de passe entrés ne correspondent pas.', 'error');\n        return false;\n      }\n\n      response = yield _this.authenticationService.register(data);\n\n      if (response) {\n        Swal.fire('Terminé !', 'Votre inscription est terminée.', 'success').then(result => {\n          if (result) {\n            _this.route.navigate(['/auth']);\n          }\n        });\n      } else {\n        Swal.fire('Erreur', \"Quelque chose a pas marché. Reesayez !\", 'error');\n      }\n\n      return true;\n    })();\n  }\n\n  login(data) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(data);\n      var response = yield _this2.authenticationService.login(data);\n\n      if (!response) {\n        Swal.fire('Erreur de connexion', 'Votre email ou mot de passe est incorrect', 'error');\n      } else {\n        Swal.fire('Connexion réussie !', 'Vous etes connecté(e). Vous allez etre redigé(e)', 'success').then(result => {\n          if (result) {\n            // this.route.navigate(['/']);\n            if (null) {} else {\n              window.location.replace('/');\n            }\n          }\n        });\n      }\n    })();\n  }\n\n};\n\n__decorate([Input()], LoginComponent.prototype, \"email\", void 0);\n\n__decorate([Output()], LoginComponent.prototype, \"submitted\", void 0);\n\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"sources":["C:\\Users\\Saliou95\\Desktop\\Master1_Informatique\\S1\\projet_angular\\src\\app\\login\\login.component.ts"],"names":[],"mappings":";;AAAA,SAAS,SAAT,EAA4B,KAA5B,EAAmC,YAAnC,EAAiD,MAAjD,QAA+D,eAA/D;AAEA,OAAO,IAAP,MAAiB,aAAjB;AAOA,IAAa,cAAc,GAA3B,MAAa,cAAb,CAA2B;AAMzB,EAAA,WAAA,CAAY,qBAAZ,EAAmE,KAAnE,EAAyF,MAAzF,EAA+G;AAA5C,SAAA,KAAA,GAAA,KAAA;AAAsB,SAAA,MAAA,GAAA,MAAA;AAL/E,SAAA,KAAA,GAAQ,EAAR;AACA,SAAA,SAAA,GAAY,IAAI,YAAJ,EAAZ;AACV,SAAA,WAAA,GAAc,EAAd;AAIE,SAAK,qBAAL,GAA6B,qBAA7B;AACD;;AAED,EAAA,QAAQ,GAAA,CACP;;AAEK,EAAA,QAAQ,CAAC,IAAD,EAAU;AAAA;;AAAA;AACtB,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA,UAAI,QAAQ,GAAG,EAAf;;AACA,UAAG,IAAI,CAAC,SAAL,KAAmB,IAAI,CAAC,SAA3B,EAAsC;AACpC,QAAA,IAAI,CAAC,IAAL,CACE,QADF,EAEE,qDAFF,EAGE,OAHF;AAKA,eAAO,KAAP;AACD;;AACD,MAAA,QAAQ,SAAS,KAAI,CAAC,qBAAL,CAA2B,QAA3B,CAAoC,IAApC,CAAjB;;AACC,UAAG,QAAH,EAAa;AACZ,QAAA,IAAI,CAAC,IAAL,CACE,WADF,EAEE,iCAFF,EAGE,SAHF,EAIE,IAJF,CAIQ,MAAD,IAAW;AAChB,cAAG,MAAH,EAAW;AACT,YAAA,KAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,CAAC,OAAD,CAApB;AACD;AACF,SARD;AASD,OAVA,MAWI;AACH,QAAA,IAAI,CAAC,IAAL,CACE,QADF,EAEE,wCAFF,EAGE,OAHF;AAKD;;AACD,aAAO,IAAP;AA9BsB;AA+BvB;;AAEK,EAAA,KAAK,CAAC,IAAD,EAAU;AAAA;;AAAA;AACnB,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA,UAAI,QAAQ,SAAS,MAAI,CAAC,qBAAL,CAA2B,KAA3B,CAAiC,IAAjC,CAArB;;AACA,UAAG,CAAC,QAAJ,EAAc;AACZ,QAAA,IAAI,CAAC,IAAL,CACE,qBADF,EAEE,2CAFF,EAGE,OAHF;AAKD,OAND,MAOK;AACH,QAAA,IAAI,CAAC,IAAL,CACE,qBADF,EAEE,kDAFF,EAGE,SAHF,EAIE,IAJF,CAIQ,MAAD,IAAW;AAChB,cAAG,MAAH,EAAW;AACT;AACA,gBAAG,IAAH,EAAQ,CAEP,CAFD,MAEM;AACJ,cAAA,MAAM,CAAC,QAAP,CAAgB,OAAhB,CAAwB,GAAxB;AACD;AACF;AACF,SAbD;AAcD;AAzBkB;AA0BpB;;AAxEwB,CAA3B;;AACY,UAAA,CAAA,CAAT,KAAK,EAAI,CAAA,E,wBAAA,E,OAAA,E,KAAW,CAAX,CAAA;;AACA,UAAA,CAAA,CAAT,MAAM,EAAG,CAAA,E,wBAAA,E,WAAA,E,KAAuC,CAAvC,CAAA;;AAFC,cAAc,GAAA,UAAA,CAAA,CAL1B,SAAS,CAAC;AACT,EAAA,QAAQ,EAAE,WADD;AAET,EAAA,WAAW,EAAE,wBAFJ;AAGT,EAAA,SAAS,EAAE,CAAC,uBAAD;AAHF,CAAD,CAKiB,CAAA,EAAd,cAAc,CAAd;SAAA,c","sourcesContent":["import { Component, OnInit, Input, EventEmitter, Output } from '@angular/core';\r\nimport { AuthenticationService } from '../authentication.service';\r\nimport Swal from 'sweetalert2';\r\nimport {Router} from '@angular/router';\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  @Input()  email = \"\";\r\n  @Output() submitted = new EventEmitter<string>();\r\n  nom_complet = \"\";\r\n  authenticationService : AuthenticationService;\r\n  \r\n  constructor(authenticationService : AuthenticationService, private route:Router, private aroute: ActivatedRoute) {\r\n    this.authenticationService = authenticationService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  async register(data: any) {\r\n    console.log(data);\r\n    var response = \"\";\r\n    if(data.password1 !== data.password2) {\r\n      Swal.fire(\r\n        'Erreur',\r\n        'Les deux mots de passe entrés ne correspondent pas.',\r\n        'error'\r\n      )\r\n      return false;\r\n    }\r\n    response = await this.authenticationService.register(data);\r\n     if(response) {\r\n      Swal.fire(\r\n        'Terminé !',\r\n        'Votre inscription est terminée.',\r\n        'success'\r\n      ).then((result) => {\r\n        if(result) {\r\n          this.route.navigate(['/auth']); \r\n        }\r\n      })\r\n    }\r\n    else {\r\n      Swal.fire(\r\n        'Erreur',\r\n        \"Quelque chose a pas marché. Reesayez !\",\r\n        'error'\r\n      )\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async login(data: any) {\r\n    console.log(data);\r\n    var response = await this.authenticationService.login(data);\r\n    if(!response) {\r\n      Swal.fire(\r\n        'Erreur de connexion',\r\n        'Votre email ou mot de passe est incorrect',\r\n        'error'\r\n      )\r\n    }\r\n    else {\r\n      Swal.fire(\r\n        'Connexion réussie !',\r\n        'Vous etes connecté(e). Vous allez etre redigé(e)',\r\n        'success'\r\n      ).then((result) => {\r\n        if(result) {\r\n          // this.route.navigate(['/']);\r\n          if(null){\r\n            \r\n          }else {\r\n            window.location.replace('/');\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}