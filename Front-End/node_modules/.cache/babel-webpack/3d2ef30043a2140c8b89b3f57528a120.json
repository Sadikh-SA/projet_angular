{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Utilisateur/Desktop/projet_angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { LivresService } from '../livres.service';\nlet HomeComponent = class HomeComponent {\n  constructor(livresService, route) {\n    this.route = route;\n    this.nItemP = 8;\n    this.page = 1;\n    this.livresService = new LivresService();\n    this.livres = [];\n    this.npages = 0;\n    this.Alllivres = [];\n    this.listeAuteurs = [];\n    this.listeAnnees = [];\n    this.listeCategories = [];\n    this.getAllLivres();\n  }\n\n  ngOnInit() {}\n\n  getAllLivres() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.Alllivres = yield _this.livresService.getLivres();\n      _this.livres = _this.Alllivres.slice((_this.page - 1) * _this.nItemP, _this.page * _this.nItemP);\n      _this.npages = _this.Alllivres.length / _this.nItemP;\n\n      if (Math.trunc(_this.npages) < _this.npages) {\n        _this.npages = Math.trunc(_this.npages) + 1;\n      }\n\n      _this.listeAnnees = _this.Alllivres.map(item => item.annee).filter((value, index, self) => self.indexOf(value) === index).sort();\n      _this.listeAuteurs = _this.Alllivres.map(item => item.auteur).filter((value, index, self) => self.indexOf(value) === index);\n      _this.listeCategories = _this.Alllivres.map(item => item.categorie).filter((value, index, self) => self.indexOf(value) === index);\n      console.log('lol', _this.listeAnnees);\n    })();\n  }\n\n  goToPage(n) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.page = n;\n      _this2.livres = _this2.Alllivres.slice((_this2.page - 1) * _this2.nItemP, _this2.page * _this2.nItemP);\n    })();\n  }\n\n  goToNextPage() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.page = _this3.page + 1;\n      _this3.livres = _this3.Alllivres.slice((_this3.page - 1) * _this3.nItemP, _this3.page * _this3.nItemP);\n    })();\n  }\n\n  goToPrevPage() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.page = _this4.page - 1;\n      _this4.livres = _this4.Alllivres.slice((_this4.page - 1) * _this4.nItemP, _this4.page * _this4.nItemP);\n    })();\n  }\n\n  counter(i) {\n    return new Array(i);\n  }\n\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"sources":["C:\\Users\\Utilisateur\\Desktop\\projet_angular\\src\\app\\home\\home.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { LivresService } from '../livres.service';\r\nimport {Router} from '@angular/router';\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  public livres: any[];\r\n  public Alllivres: any[];\r\n  public npages: number;\r\n  public nItemP = 8;\r\n  public page = 1;\r\n  public listeAuteurs : any[];\r\n  public listeAnnees : any[];\r\n  public listeCategories : any[];\r\n  livresService = new LivresService;\r\n  constructor(livresService : LivresService, private route:Router) {\r\n    this.livres = [];\r\n    this.npages = 0;\r\n    this.Alllivres = [];\r\n    this.listeAuteurs = [];\r\n    this.listeAnnees = [];\r\n    this.listeCategories = [];\r\n    this.getAllLivres() ;\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  async getAllLivres() {\r\n    this.Alllivres = await this.livresService.getLivres();\r\n    this.livres = this.Alllivres.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\r\n    this.npages = (this.Alllivres.length/this.nItemP);\r\n    if(Math.trunc(this.npages) < this.npages) {this.npages = Math.trunc(this.npages) + 1;}\r\n    this.listeAnnees =  (this.Alllivres.map(item => item.annee).filter((value, index, self) => self.indexOf(value) === index)).sort()\r\n    this.listeAuteurs =  this.Alllivres.map(item => item.auteur).filter((value, index, self) => self.indexOf(value) === index)\r\n    this.listeCategories =  this.Alllivres.map(item => item.categorie).filter((value, index, self) => self.indexOf(value) === index)\r\n    console.log('lol',this.listeAnnees);\r\n  }\r\n\r\n  async goToPage(n: number) {\r\n    this.page = n;\r\n    this.livres = this.Alllivres.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\r\n  }\r\n\r\n  async goToNextPage() {\r\n    this.page = this.page+1;\r\n    this.livres = this.Alllivres.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\r\n  }\r\n\r\n  async goToPrevPage() {\r\n    this.page = this.page - 1;\r\n    this.livres = this.Alllivres.slice((this.page-1)*this.nItemP, (this.page)*this.nItemP);\r\n  }\r\n\r\n  counter(i: number) {\r\n    return new Array(i);\r\n}\r\n\r\n}\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}